---
title: GO语言学习---package
date: 2017-12-16
updated: 2017-12-16
tags:
    - golang
---
GO语言学习---package


### 基本概念
1. 工作区： 工作去其实就是一个特定的工程目录，包含三个目录： bin目录，pkg目录和src目录
2. 命令源码文件：被声明为属于main代码包，且文件代码中包含无参数声明和结果参数生命的main函数的文件，可以直接通过go run执行
3. 库源码文件： src目录下的源码文件，不包括命令源码文件，通过go build生产.a后缀的库文件
4. 测试源码文件： src目录的测试源码文件，以“_test.go”结尾的文件，可以通过go test命令执行测试
<!-- more -->

### package的使用
1.  包声明如下，其中包名为代码路径名的最后一个元素，例如basic/set声明如下
>   package set
2.  多个包导入
```
import (
    "basic/set"
    "test/test"
)
```
3.  包的别名，如果我们想直接调用某个依赖包，可以使用`.`作为包的别名
```
import (
    . "logging"
    lb "go_lib/logging"
)
```
4.  包的初始化：在Go语言中，可以有专门的函数用于初始化包，其名称必须为`Init`，且函数无参数声明和结果声明
```
func Init(){
    fmt.println("Initialize...")
}
```
### package注意事项
1.  同一个代码包中的所有源文件，其所属的代码包的名称必须一致
2.  命令源码文件通常在单独一个代码包中，即main代码包
3.  当`GOPATH`中只包含一个工作区的目录路径时，`go install`命令才会把命令源码文件安装到`目录`下
4.  测试源码文件中必须包含一个名称以“Test”或者“ Benchmark”开头，拥有一个类型为“Test.T”或者“Test.B”的参数得函数。类型“Test.T”和“Test.B”分别对应功能测试和基准测试所需的结构体
5.  对于`import _ "logging"`，这种情况只触发了`logging`包的初始化
6.  当前代码包种所有全局变量的初始化会在Init函数前完成
7.  所有包的初始化都会在main函数前执行完成
8.  `all`和`std`代表了两个特殊的代码包，`all`代表了`GOPATH`中所有的工作区中的所有代码包；`std`代表了GO语言标准库中的所有代码包
9.  每个子目录中只能存在一个package，否则编译时会报错。
10.  组成一个package的多个文件，编译后实际上和一个文件类似，组成包的不同文件相互之间可以直接引用变量和函数，不论是否导出；
11.  每个package中应该是每个init都会被调用，且顺序固定
    *   对同一个go文件的init()调用顺序是从上到下的
    *   对同一个package中不同文件是按文件名字符串比较“从小到大”顺序调用各文件中的init()函数
    *   对于不同的package，如果不相互依赖的话，按照main包中"先import的后调用"的顺序调用其包中的init()
    *   如果package存在依赖，则先调用最早被依赖的package中的init()
